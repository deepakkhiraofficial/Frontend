import{r as n,u as U,a as I,j as e,L as P,N as z,F as V,b as Z,d as X,e as ee,f as se,h as te,i as ae,k as re,O as G,V as F,l as E,y as k,M as ne,m as J,X as oe,n as le,o as ie,p as ce,U as Y,P as de,S as Q,q as me,C as xe,s as ue,t as he,v as ge,w as pe,x as R,B as fe,R as be,z as A,A as je,D as ye}from"./react-vendor-BiMcOFBA.js";import{a as O,b as Ne,f as ve,d as _,E as we,e as ke,l as Se}from"./vendor-C0rBX9nz.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const p of o)if(p.type==="childList")for(const t of p.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function r(o){const p={};return o.integrity&&(p.integrity=o.integrity),o.referrerPolicy&&(p.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?p.credentials="include":o.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function i(o){if(o.ep)return;o.ep=!0;const p=r(o);fetch(o.href,p)}})();const K=()=>{const[s,l]=n.useState(!1),[r,i]=n.useState(!1),[o,p]=n.useState(null),t=U(),b=I(),m=n.useRef();n.useEffect(()=>{function y(S){m.current&&!m.current.contains(S.target)&&i(!1)}return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),n.useEffect(()=>{i(!1),l(!1);const y=localStorage.getItem("role");p(y)},[t]);const f=()=>l(y=>!y),d=()=>i(y=>!y),a=()=>{localStorage.removeItem("role"),p(null),i(!1),b("/login")},j=({isActive:y})=>y?"text-indigo-600 font-semibold":"text-gray-700 hover:text-indigo-600";return e.jsxs("nav",{className:"bg-white shadow-md fixed w-full top-0 left-0 z-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx(P,{to:"/",className:"text-2xl font-bold text-indigo-600",onClick:()=>l(!1),children:"MyShop"}),e.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[e.jsx(z,{to:"/",className:j,children:"Home"}),e.jsx(z,{to:"/about",className:j,children:"About"}),e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:d,"aria-haspopup":"true","aria-expanded":r,className:"flex items-center text-gray-700 hover:text-indigo-600 focus:outline-none",children:[e.jsx(V,{className:"text-2xl mr-2"}),"Account",e.jsx("svg",{className:`ml-1 w-4 h-4 transform transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-30 animate-fade-slide origin-top-right",children:[e.jsx("div",{className:"dropdown-arrow"}),o==="admin"?e.jsx("button",{onClick:a,className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Logout"}):o==="user"?e.jsxs(e.Fragment,{children:[e.jsx(P,{to:"/profile",onClick:()=>i(!1),className:"block px-4 py-2 hover:bg-gray-100",children:"Profile"}),e.jsx("button",{onClick:a,className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{to:"/login",onClick:()=>i(!1),className:"block px-4 py-2 hover:bg-gray-100",children:"Login"}),e.jsx(P,{to:"/signup",onClick:()=>i(!1),className:"block px-4 py-2 hover:bg-gray-100",children:"Signup"})]})]})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("button",{onClick:f,"aria-label":"Toggle menu",className:"text-gray-700 focus:outline-none",children:s?e.jsx(Z,{size:24}):e.jsx(X,{size:24})})})]})}),s&&e.jsxs("div",{className:"md:hidden bg-white shadow-md border-t",children:[e.jsx(z,{to:"/",onClick:()=>l(!1),className:"block px-6 py-3 border-b border-gray-200 hover:bg-gray-100",children:"Home"}),e.jsx(z,{to:"/about",onClick:()=>l(!1),className:"block px-6 py-3 border-b border-gray-200 hover:bg-gray-100",children:"About"}),e.jsxs("div",{className:"border-t mt-2",children:[e.jsx("p",{className:"px-6 pt-3 text-gray-700 font-semibold",children:"Account"}),o==="admin"?e.jsx("button",{onClick:()=>{a(),l(!1)},className:"w-full text-left px-6 py-3 hover:bg-gray-100",children:"Logout"}):o==="user"?e.jsxs(e.Fragment,{children:[e.jsx(P,{to:"/profile",onClick:()=>l(!1),className:"block px-6 py-3 hover:bg-gray-100",children:"Profile"}),e.jsx("button",{onClick:()=>{a(),l(!1)},className:"w-full text-left px-6 py-3 hover:bg-gray-100",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{to:"/login",onClick:()=>l(!1),className:"block px-6 py-3 hover:bg-gray-100",children:"Login"}),e.jsx(P,{to:"/signup",onClick:()=>l(!1),className:"block px-6 py-3 hover:bg-gray-100",children:"Signup"})]})]})]})]})};function Ce(){return e.jsxs("footer",{className:"text-gray-300 pt-12 pb-10 px-6 md:px-16 relative overflow-hidden",style:{backgroundImage:"url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e')",backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/80"}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto flex flex-col gap-12",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Solutions"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(P,{to:"/marketing",className:"hover:text-indigo-400",children:"Marketing"})}),e.jsx("li",{children:e.jsx(P,{to:"/analytics",className:"hover:text-indigo-400",children:"Analytics"})}),e.jsx("li",{children:e.jsx(P,{to:"/automation",className:"hover:text-indigo-400",children:"Automation"})}),e.jsx("li",{children:e.jsx(P,{to:"/commerce",className:"hover:text-indigo-400",children:"Commerce"})}),e.jsx("li",{children:e.jsx(P,{to:"/insights",className:"hover:text-indigo-400",children:"Insights"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(P,{to:"/support",className:"hover:text-indigo-400",children:"Submit Ticket"})}),e.jsx("li",{children:e.jsx(P,{to:"/docs",className:"hover:text-indigo-400",children:"Documentation"})}),e.jsx("li",{children:e.jsx(P,{to:"/guides",className:"hover:text-indigo-400",children:"Guides"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(P,{to:"/about",className:"hover:text-indigo-400",children:"About"})}),e.jsx("li",{children:e.jsx(P,{to:"/blog",className:"hover:text-indigo-400",children:"Blog"})}),e.jsx("li",{children:e.jsx(P,{to:"/jobs",className:"hover:text-indigo-400",children:"Jobs"})}),e.jsx("li",{children:e.jsx(P,{to:"/press",className:"hover:text-indigo-400",children:"Press"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(P,{to:"/terms",className:"hover:text-indigo-400",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx(P,{to:"/privacy",className:"hover:text-indigo-400",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(P,{to:"/license",className:"hover:text-indigo-400",children:"License"})})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-6 border-t border-gray-700 pt-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-2",children:"Subscribe to our newsletter"}),e.jsx("p",{className:"text-sm text-gray-400",children:"The latest news, articles, and resources, sent to your inbox weekly."})]}),e.jsxs("form",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"px-4 py-2 rounded-md bg-gray-800 text-white border border-gray-600 focus:outline-none w-full sm:w-64"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-indigo-500 hover:bg-indigo-600 transition text-white rounded-md",children:"Subscribe"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-sm border-t border-gray-700 pt-6",children:[e.jsx("p",{className:"text-gray-400 mb-4 sm:mb-0",children:"Â© 2024 MyShop. All rights reserved."}),e.jsxs("div",{className:"flex space-x-4 text-white text-lg",children:[e.jsx("a",{href:"#","aria-label":"Facebook",className:"hover:text-indigo-400",children:e.jsx(ee,{})}),e.jsx("a",{href:"#","aria-label":"Instagram",className:"hover:text-pink-400",children:e.jsx(se,{})}),e.jsx("a",{href:"#","aria-label":"Twitter",className:"hover:text-blue-400",children:e.jsx(te,{})}),e.jsx("a",{href:"#","aria-label":"GitHub",className:"hover:text-gray-400",children:e.jsx(ae,{})}),e.jsx("a",{href:"#","aria-label":"YouTube",className:"hover:text-red-500",children:e.jsx(re,{})})]})]})]})]})}function Pe(){const{pathname:s}=U(),l=s==="/",r=s.startsWith("/login")||s.startsWith("/signup");return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[l&&e.jsx(K,{}),e.jsx("main",{className:"flex-grow",children:e.jsx(G,{})}),!r&&e.jsx(Ce,{})]})}const Ae=()=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 mt-10",children:[e.jsxs("section",{className:"flex-1 flex flex-col items-center justify-center text-center px-4 py-12 bg-indigo-600 text-white",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 leading-tight",children:"Welcome to My Shop"}),e.jsx("p",{className:"text-lg sm:text-xl mb-8 max-w-2xl mx-auto leading-relaxed",children:"Powerful admin and customer tools in one platform. Easily manage users, products, and orders with a few clicks."}),e.jsxs("div",{className:"flex gap-4 flex-wrap justify-center",children:[e.jsx(P,{to:"/login",className:"bg-white text-indigo-600 font-semibold px-6 py-2 rounded-md hover:bg-gray-100 transition",children:"Login"}),e.jsx(P,{to:"/signup",className:"border border-white text-white px-6 py-2 rounded-md hover:bg-white hover:text-indigo-600 transition",children:"Sign Up"})]})]}),e.jsxs("section",{className:"py-12 px-4 sm:px-6 bg-white text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6 text-gray-800",children:"What You Can Do"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-indigo-600",children:"Manage Users"}),e.jsx("p",{className:"text-gray-600",children:"View, add, and update users in a streamlined interface."})]}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-indigo-600",children:"Track Orders"}),e.jsx("p",{className:"text-gray-600",children:"Monitor order history, current status, and customer activity."})]}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-indigo-600",children:"Control Inventory"}),e.jsx("p",{className:"text-gray-600",children:"Add, edit, and track products with ease in your admin dashboard."})]})]})]}),e.jsxs("section",{className:"py-12 px-4 sm:px-6 bg-gray-100 text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-10 text-gray-800",children:"What Our Users Say"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 italic mb-4",children:'"This platform saved us hours of manual work every week. Super intuitive!"'}),e.jsx("h4",{className:"font-bold text-indigo-600",children:"â Arjun Singh, Operations Manager"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 italic mb-4",children:'"Weâve grown 40% since using YourCompany. The dashboard is a game changer."'}),e.jsx("h4",{className:"font-bold text-indigo-600",children:"â Deepak Kushwah, E-commerce Founder"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("p",{className:"text-gray-600 italic mb-4",children:'"I love how everything is organized and easy to access. Excellent UX!"'}),e.jsx("h4",{className:"font-bold text-indigo-600",children:"â Priya, Product Lead"})]})]})]}),e.jsxs("section",{className:"py-12 px-4 sm:px-6 bg-white text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4 text-gray-800",children:"Stay in the loop"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Subscribe to our newsletter for updates and exclusive offers."}),e.jsxs("form",{className:"max-w-md mx-auto flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 transition",children:"Subscribe"})]})]})]}),H=["https://images.unsplash.com/photo-1585386959984-a4155224a1c1?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1603791440384-56cd371ee9a7?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1609947024030-6373c69a1821?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1556740749-887f6717d7e4?auto=format&fit=crop&w=1400&q=80"],Oe=[{name:"Deepak Kushwah",role:"Founder & CEO",image:"https://res.cloudinary.com/dy5s3zplq/image/upload/t_Profile/v1748423179/poto_ezrfbt.jpg"},{name:"Liam Johnson",role:"Head of Product",image:"https://randomuser.me/api/portraits/men/45.jpg"},{name:"Sophia Williams",role:"Customer Support Lead",image:"https://randomuser.me/api/portraits/women/46.jpg"}],Le=[{name:"Aarav Singh",feedback:"Amazing products and fast delivery! Love the eco-friendly packaging.",image:"https://randomuser.me/api/portraits/men/32.jpg"},{name:"Maya Patel",feedback:"Customer service is top-notch. Highly recommend this shop!",image:"https://randomuser.me/api/portraits/women/29.jpg"}],De=["https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/tesla.svg","https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg","https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg","https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg"],Ie=()=>e.jsxs("div",{className:"bg-gray-50",children:[e.jsx(K,{}),e.jsxs("div",{className:"relative h-[60vh] overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:e.jsx("h1",{className:"text-white text-4xl md:text-6xl font-extrabold text-center px-4",children:"Discover the People Behind Our Passion"})}),e.jsx("div",{className:"absolute top-0 left-0 flex h-full w-[300%] animate-scroll",children:H.concat(H).map((s,l)=>e.jsx("div",{className:"h-full w-[20%] flex-shrink-0",children:e.jsx("img",{src:s,alt:"Hero",className:"h-full w-full object-cover"})},l))})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("section",{className:"mb-16 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Our Mission"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"At our eCommerce shop, we strive to bring you high-quality, sustainable products with a focus on customer satisfaction, ethical sourcing, and seamless shopping experiences."})]}),e.jsxs("section",{className:"mb-20",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-10",children:"Why Choose Us"}),e.jsx("div",{className:"grid md:grid-cols-4 sm:grid-cols-2 gap-8 text-center",children:[["ð±","Eco-Friendly Products"],["â¡","Fast & Reliable Delivery"],["ð¬","24/7 Support"],["ð","Secure Payments"]].map(([s,l],r)=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow hover:shadow-lg transition",children:[e.jsx("div",{className:"text-4xl mb-3",children:s}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:l})]},r))})]}),e.jsxs("section",{className:"mb-20",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12",children:"Meet the Team"}),e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-10",children:Oe.map(s=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-md hover:shadow-xl transition-all text-center p-6 transform hover:-translate-y-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-24 h-24 rounded-full object-cover mx-auto mb-4 border-4 border-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.role})]},s.name))})]}),e.jsxs("section",{className:"mb-20 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-12",children:"What Our Customers Say"}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-8",children:Le.map((s,l)=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 transition transform hover:scale-105",children:[e.jsxs("p",{className:"text-gray-600 mb-4 italic",children:['"',s.feedback,'"']}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-full"}),e.jsx("span",{className:"font-semibold text-gray-800",children:s.name})]})]},l))})]}),e.jsxs("section",{className:"mb-20 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Our Trusted Partners"}),e.jsx("div",{className:"flex justify-center items-center gap-8 flex-wrap animate-fadeIn",children:De.map((s,l)=>e.jsx("img",{src:s,alt:"partner",className:"h-12 object-contain grayscale hover:grayscale-0 transition"},l))})]}),e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Get in Touch"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{children:"ð§"}),e.jsx("span",{children:"deepakKushwah475110@gmail.com"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{children:"ð"}),e.jsx("span",{children:"+91-9109001109"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{children:"ð"}),e.jsx("span",{children:"Ward 15 Ramgarh Street Dabra"})]})]})]})]})]}),Fe={user:null,token:null,login:()=>{},logout:()=>{},loading:!0},B=n.createContext(Fe),Ee=s=>{try{const{exp:l}=Ne(s);return l*1e3<Date.now()}catch{return!0}},Te=({children:s})=>{const[l,r]=n.useState(null),[i,o]=n.useState(null),[p,t]=n.useState(!0);n.useEffect(()=>{let f=!0;return(async()=>{const a=localStorage.getItem("token");if(!a||Ee(a)){f&&t(!1),m(!1);return}o(a);try{const j=await O.get("https://myshop-72k8.onrender.com/me",{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});j.data?.user&&f?r(j.data.user):m(!1)}catch(j){const y=j?.response?.data?.message||j.message;console.error("Auth revalidation failed:",y),y==="Token expired. Please login again."&&F.error("Session expired. Please log in again."),m(!1)}finally{f&&t(!1)}})(),()=>{f=!1}},[]);const b=(f,d)=>{try{localStorage.setItem("token",d),r(f),o(d)}catch(a){console.error("Login failed:",a)}},m=async(f=!0)=>{try{await O.get("https://myshop-72k8.onrender.com/logout",{withCredentials:!0})}catch(d){console.error("Logout request failed:",d.message)}localStorage.removeItem("token"),r(null),o(null),f&&F.success("Logged out successfully.")};return e.jsx(B.Provider,{value:{user:l,token:i,login:b,logout:m,loading:p},children:p?e.jsx("div",{className:"text-center py-10 font-medium text-gray-500",children:"Loading..."}):s})},Me=()=>{const s=I(),{login:l}=n.useContext(B),[r,i]=n.useState({email:"",password:""}),[o,p]=n.useState(!1),t=m=>{const{name:f,value:d}=m.target;i(a=>({...a,[f]:d}))},b=async m=>{m.preventDefault(),p(!0);try{const f=await O.post("https://myshop-72k8.onrender.com/login",r,{withCredentials:!0}),{token:d,user:a}=f.data;if(d&&a)l(a,d),localStorage.setItem("user",JSON.stringify(a)),k.success("Login successful!"),s("/admin");else throw new Error("Invalid login response")}catch(f){const d=f.response?.data?.message||"Login failed. Check your credentials or try again later.";k.error(d)}finally{p(!1)}};return n.useEffect(()=>{const m=JSON.parse(localStorage.getItem("user"));m&&(m.role==="admin"?s("/admin"):m.role==="user"&&s("/user/dashboard"))},[s]),e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 px-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 p-8 rounded-xl shadow-xl transition duration-300",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-indigo-700 dark:text-indigo-400 mb-6",children:"Welcome Back ð"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:t,required:!0,autoComplete:"email",placeholder:"you@example.com",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-800 dark:text-white transition"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:t,required:!0,autoComplete:"current-password",placeholder:"â¢â¢â¢â¢â¢â¢â¢â¢",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-800 dark:text-white transition"})]}),e.jsx("div",{className:"text-right text-sm mt-1",children:e.jsx(P,{to:"/forget-password",className:"text-indigo-600 hover:underline dark:text-indigo-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-2 px-4 text-white rounded-lg font-semibold text-lg transition ${o?"bg-indigo-300 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:o?"Logging in...":"Login"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Donât have an account?"," ",e.jsx(P,{to:"/signup",className:"text-indigo-600 font-medium hover:underline",children:"Sign Up"})]})]})})]})},ze=()=>{const[s,l]=n.useState({name:"",email:"",password:"",contact:"",city:"",pincode:"",dob:"",gender:""}),[r,i]=n.useState(!1),[o,p]=n.useState(!1),t=I(),b=d=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d),m=d=>{const{name:a,value:j}=d.target;l(y=>({...y,[a]:j}))},f=async d=>{d.preventDefault(),i(!0);const{name:a,email:j,password:y,contact:S,city:c,pincode:u,dob:h,gender:v}=s;if(!a||!j||!y||!S||!c||!u||!h||!v){k.error("All required fields must be filled.",{position:"top-right",autoClose:3e3}),i(!1);return}if(!b(j)){k.error("Enter a valid email address.",{position:"top-right",autoClose:3e3}),i(!1);return}try{const g=await O.post("https://myshop-72k8.onrender.com/signup",s);console.log(g),g.data.message==="User Signup Successfully"?(k.success("Signup Successful!",{position:"top-right",autoClose:1500}),localStorage.setItem("token",g.data.token),localStorage.setItem("user",JSON.stringify(g.data.user)),setTimeout(()=>{l({name:"",email:"",password:"",contact:"",city:"",pincode:"",dob:"",gender:""}),t("/login")},1600)):k.error(g?.data?.message||"Signup failed.",{position:"top-right",autoClose:3e3})}catch(g){console.error("Signup error:",{message:g.message,stack:g.stack,config:g.config,isAxiosError:g.isAxiosError}),console.error("Response data:",g?.response?.data),k.error(g?.response?.data?.message||"Signup failed. Please check internet connection. Try again.")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Signup Account"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[["name","email","contact","city","pincode","dob"].map(d=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 capitalize",children:d}),e.jsx("input",{type:d==="dob"?"date":d==="email"?"email":d==="contact"?"number":"text",name:d,id:d,value:s[d],onChange:m,className:"mt-1 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]},d)),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",id:"gender",value:s.gender,onChange:m,className:"mt-1 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",name:"password",id:"password",value:s.password,onChange:m,className:"mt-1 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("span",{onClick:()=>p(d=>!d),className:"absolute right-3 top-3 text-sm cursor-pointer text-blue-600",children:o?"Hide":"Show"})]})]}),e.jsx("button",{type:"submit",disabled:r,className:`w-full py-2 px-4 text-white font-semibold rounded-md ${r?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:r?"Signing up...":"Signup"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>t("/login"),className:"text-blue-600 hover:underline font-medium",children:"Login"})]})})]})})]})},$e=()=>{const[s,l]=n.useState({email:"",password:"",confirmPassword:""}),[r,i]=n.useState(!1),o=I(),p=m=>{l(f=>({...f,[m.target.name]:m.target.value}))},t=m=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/.test(m),b=async m=>{m.preventDefault();const{email:f,password:d,confirmPassword:a}=s;if(!f||!d||!a){k.error("All fields are required.");return}if(!t(d)){k.error("Password must be at least 6 characters, with uppercase, lowercase, number, and special character.");return}if(d!==a){k.error("Passwords do not match.");return}try{i(!0);const j=await O.post("https://myshop-72k8.onrender.com/forget-password",{email:f,password:d});j.status===200&&(k.success(j.data.message||"Password updated successfully.",{position:"top-right",autoClose:1500}),l({email:"",password:"",confirmPassword:""}),o("/login"))}catch(j){k.error(j.response?.data?.message||"Failed to reset password.")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-200 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-center text-gray-800 mb-6",children:"Reset Your Password"}),e.jsx(E,{}),e.jsxs("form",{onSubmit:b,className:"space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:s.email,onChange:p})]}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"password",name:"password",placeholder:"New password",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:s.password,onChange:p})]}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm new password",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:s.confirmPassword,onChange:p})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition duration-200",children:r?"Updating...":"Reset Password"})]})]})})},Re=()=>{const[s,l]=n.useState([]),[r,i]=n.useState(!0),[o,p]=n.useState(""),[t,b]=n.useState("All"),[m,f]=n.useState("");n.useEffect(()=>{(async()=>{try{const j=localStorage.getItem("token"),y=j?{headers:{Authorization:`Bearer ${j}`}}:{},S=await O.get("https://myshop-72k8.onrender.com/getOrderAdmin",y);console.log(S),l(S.data.orders||[])}catch{p("Failed to load orders.")}finally{i(!1)}})()},[]);const d=s.filter(a=>{const j=t==="All"||a.status===t,y=m.toLowerCase(),S=a._id.toLowerCase().includes(y)||a.userId?.name&&a.userId.name.toLowerCase().includes(y)||a.userId?.email&&a.userId.email.toLowerCase().includes(y);return j&&S});return r?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-dashed rounded-full animate-spin"})}):o?e.jsx("div",{className:"p-6 text-center text-red-500",children:o}):e.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-10 max-w-7xl mx-auto bg-gradient-to-b from-white via-gray-50 to-gray-100 min-h-screen",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-center text-gray-800 mb-8",children:"All Customers"}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-4",children:d.length?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 sm:grid-cols-1 lg:grid-cols-2",children:d.map(a=>e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 shadow-sm p-4 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex flex-col gap-2 mb-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Order Id:"})," ",a._id]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Order Date:"})," ",new Date(a.createdAt).toLocaleString("en-IN",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",a.userId?.name||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.userId?.email||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"City:"})," ",a.userId?.city||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Pincode:"})," ",a.userId?.pincode||"N/A"]})]})]},a._id))}):e.jsx("p",{className:"text-gray-500 italic text-center",children:"No matching orders found."})})]})},qe=()=>{const s=I(),[l,r]=n.useState("U"),[i,o]=n.useState(!1);n.useEffect(()=>{const b=localStorage.getItem("user");if(b)try{const m=JSON.parse(b);m.role!=="admin"?s("/login"):r(m.name?.charAt(0).toUpperCase()||"U")}catch(m){console.error("Error parsing user data:",m),localStorage.clear(),s("/login")}else s("/login")},[s]);const p=()=>{localStorage.clear(),s("/login")},t=[{name:"Dashboard",to:"dashboard",icon:ce},{name:"Customers",to:"customers",icon:Y},{name:"Products",to:"products",icon:de},{name:"Orders",to:"orders",icon:Q},{name:"Settings",to:"settings",icon:me},{name:"Add Product",to:"product/add",icon:xe},{name:"Admin Users",to:"users",icon:Y}];return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsxs("header",{className:"bg-indigo-700 text-white p-4 flex justify-between items-center sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{"aria-label":"Toggle Sidebar",className:"md:hidden focus:outline-none",onClick:()=>o(!i),children:i?e.jsx(oe,{size:24}):e.jsx(le,{size:24})}),e.jsx("div",{className:"rounded-full w-10 h-10 flex items-center justify-center bg-blue-600 font-semibold text-lg",children:l}),e.jsx("h1",{className:"text-xl font-semibold",children:"Admin Panel"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"hidden sm:inline font-medium",children:["Welcome, ",l]}),e.jsxs("button",{onClick:p,className:"bg-indigo-900 hover:bg-indigo-950 px-3 py-1 rounded-md flex items-center gap-2",children:[e.jsx(ie,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col md:flex-row",children:[e.jsx("nav",{className:`bg-white md:block shadow-md w-full md:w-64 p-4 transition-all duration-300 md:static absolute z-40 ${i?"block":"hidden"}`,children:e.jsx("ul",{className:"space-y-3",children:t.map(({name:b,to:m,icon:f})=>e.jsx("li",{children:e.jsxs(z,{to:m,className:({isActive:d})=>`flex items-center space-x-3 px-3 py-2 rounded-md font-medium ${d?"text-indigo-600 bg-indigo-100":"text-gray-700 hover:text-indigo-600 hover:bg-indigo-100"}`,onClick:()=>o(!1),children:[e.jsx(f,{size:18}),e.jsx("span",{children:b})]})},m))})}),e.jsx("main",{className:"flex-1 bg-white p-4 md:p-6",children:e.jsx(G,{})})]}),e.jsx("footer",{className:"text-center text-gray-500 text-sm py-4",children:"Â© 2025 My Shop. All rights reserved."})]})},q=8,_e=({products:s,onAddToCart:l,formatPrice:r})=>{const[i,o]=n.useState(""),[p,t]=n.useState(1),b=n.useMemo(()=>s.filter(a=>a.name.toLowerCase().includes(i.toLowerCase())),[s,i]),m=Math.ceil(b.length/q),f=n.useMemo(()=>{const a=(p-1)*q;return b.slice(a,a+q)},[b,p]),d=a=>{o(a.target.value),t(1)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-indigo-700 text-center",children:"Our Products"}),e.jsxs("div",{className:"flex items-center max-w-md mx-auto mb-6 bg-white border border-gray-300 rounded-lg shadow-sm px-3 py-2",children:[e.jsx(ue,{className:"text-gray-500 mr-2",size:20}),e.jsx("input",{type:"text",placeholder:"Search products...",value:i,onChange:d,className:"w-full outline-none text-gray-700"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:f.length===0?e.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No products found."}):f.map((a,j)=>{const y=a._id||a.id||`product-${j}`,S=a?.discount>0,c=a?.stock<=0,u=a?.mrp||a.price;return e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-transform transform hover:-translate-y-2 p-6 flex flex-col items-center text-center",children:[S&&e.jsxs("div",{className:"absolute top-4 left-4 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow z-10",children:[a.discount,"% OFF"]}),e.jsx("img",{loading:"lazy",src:a.image||"https://via.placeholder.com/150",alt:a.name||"Product Image",className:"w-36 h-36 object-cover rounded-xl mb-4 shadow"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate w-full",title:a.name,children:a.name}),a.rating&&e.jsxs("p",{className:"text-sm text-yellow-600 mt-1",children:["â­ ",a.rating,"/5"]}),e.jsx("div",{className:"mt-2 text-center",children:S?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-400 line-through text-sm",children:["MRP: ",r(u)]}),e.jsx("p",{className:"text-green-600 text-lg font-bold",children:r(a.price)})]}):e.jsx("p",{className:"text-green-600 text-lg font-bold",children:r(a.price)})}),e.jsxs("button",{onClick:()=>!c&&l(a),disabled:c,className:`mt-6 w-full font-medium py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2
                                        ${c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-purple-600 hover:to-indigo-500"}`,"aria-label":`Add ${a.name} to cart`,children:[e.jsx(Q,{size:20}),c?"Out of Stock":"Add to Cart"]})]},y)})}),m>1&&e.jsx("div",{className:"flex justify-center items-center gap-2 mt-10 flex-wrap",children:Array.from({length:m},(a,j)=>e.jsx("button",{onClick:()=>t(j+1),className:`px-4 py-2 rounded-full border transition ${p===j+1?"bg-indigo-600 text-white font-semibold shadow":"bg-white text-indigo-600 border-indigo-300 hover:bg-indigo-50"}`,children:j+1},j+1))})]})},Ue=({cart:s,updateQty:l,removeItem:r,formatPrice:i})=>{const o=I(),[p,t]=n.useState([]),[b,m]=n.useState(null),[f,d]=n.useState(null),a=n.useRef({}),j=(c,u)=>{u<1||(a.current[c]&&clearTimeout(a.current[c]),d(c),a.current[c]=setTimeout(async()=>{const h=s.findIndex(v=>v._id===c||v.id===c);if(h===-1)return d(null);s[h];try{const{data:v}=await O.get(`https://myshop-72k8.onrender.com/products/getProductById/${c}`),g=v.product.stock;if(u>g){k.warning("Quantity exceeds available stock.");return}l(c,u,g),m(c),setTimeout(()=>m(null),500)}catch(v){console.error(v),k.error("Failed to update quantity.")}finally{d(null)}},300))},y=c=>{t(u=>[...u,c]),setTimeout(()=>{r(c),t(u=>u.filter(h=>h!==c))},300)},S=s.reduce((c,u)=>c+u.price*u.qty,0);return e.jsx("div",{className:"flex flex-col h-full max-h-[80vh] min-h-[300px] sm:min-h-[400px] md:min-h-[500px]",children:s.length===0?e.jsx("p",{className:"text-center text-gray-500 mt-20",children:"Your cart is empty."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex-1 overflow-y-auto scroll-smooth space-y-4 mb-4 px-2",children:s.map(c=>{const u=c.id||c._id,h=p.includes(u),v=b===u,g=f===u;return e.jsxs("li",{className:`flex flex-col sm:flex-row items-center sm:items-start gap-4 border-b pb-3 transition-all duration-300 ease-in-out ${h?"opacity-0 -translate-x-10 h-0 p-0 overflow-hidden":"opacity-100"} ${v?"bg-yellow-100":""}`,children:[e.jsx("img",{src:c.image||"/no-image.png",alt:c.name||"Product image",className:"w-full max-w-[150px] h-28 object-cover rounded-md mx-auto sm:mx-0"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-center sm:text-left",children:c.name}),e.jsx("p",{className:"text-indigo-600 font-bold text-center sm:text-left",children:i(c.price)}),e.jsxs("div",{className:"flex justify-center sm:justify-start items-center mt-2 space-x-2",children:[e.jsx("label",{htmlFor:`qty-${u}`,className:"text-sm",children:"Qty:"}),e.jsx("input",{type:"number",id:`qty-${u}`,min:"1",value:c.qty,disabled:g,onChange:w=>{const x=Math.max(1,parseInt(w.target.value,10)||1);j(u,x)},className:`w-16 border rounded px-2 py-1 text-center transition ${g?"opacity-60 cursor-not-allowed":""}`})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-center sm:text-left",children:["In stock: ",c.stock]})]}),e.jsx("button",{type:"button",onClick:()=>y(u),className:"text-red-600 hover:text-red-800 mt-3 sm:mt-0",title:"Remove Item","aria-label":`Remove ${c.name} from cart`,disabled:g,children:e.jsx(he,{size:20})})]},u)})}),e.jsxs("div",{className:"border-t pt-4 px-3",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900 mb-4 text-center sm:text-right",children:["Total: ",i(S)]}),e.jsx("button",{onClick:()=>o("/checkout",{state:{cart:s,totalPrice:S}}),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-md transition",children:"Proceed to Checkout"})]})]})})},Be=()=>{const s=I(),l=n.useRef(),[r,i]=n.useState(""),[o,p]=n.useState([]),[t,b]=n.useState([]),[m,f]=n.useState(!1),[d,a]=n.useState(!1);n.useEffect(()=>{const x=N=>{l.current&&!l.current.contains(N.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),n.useEffect(()=>{const x=JSON.parse(localStorage.getItem("user"));if(!x)return s("/login");i(x.name),(async()=>{try{const L=await O.get("https://myshop-72k8.onrender.com/products");p(L.data.products||[])}catch{k.error("Failed to load products.")}})();const C=JSON.parse(localStorage.getItem("cart"))||[];b(C)},[s]);const j=async x=>{const N=x._id||x.id,C=t.find(L=>(L._id||L.id)===N);if(!x.stock||x.stock<=0)return k.warn("Out of stock!");try{const L=C?t.map(D=>(D._id||D.id)===N?{...D,qty:D.qty+1}:D):[...t,{...x,qty:1}];b(L),localStorage.setItem("cart",JSON.stringify(L)),k.success(`${x.name} added to cart`)}catch(L){console.error("Error updating stock:",L),k.error("Unable to add item. Possibly out of stock.")}},y=async(x,N)=>{const C=t.find(D=>(D._id||D.id)===x);if(!C||N<1||N===C.qty)return;const L=N-C.qty;try{await O.put(`https://myshop-72k8.onrender.com/products/${x}/update-stock`,{qtyChange:L});const D=t.map($=>($._id||$.id)===x?{...$,qty:N}:$);b(D),localStorage.setItem("cart",JSON.stringify(D))}catch{k.error("Stock update failed")}},S=async x=>{const N=t.find(C=>(C._id||C.id)===x);if(N)try{await O.put(`https://myshop-72k8.onrender.com/products/${x}/update-stock`,{qtyChange:-N.qty});const C=t.filter(L=>(L._id||L.id)!==x);b(C),localStorage.setItem("cart",JSON.stringify(C)),k.info("Item removed from cart")}catch{k.error("Failed to restore stock")}},c=()=>{if(!t.length)return k.warning("Your cart is empty.");s("/checkout",{state:{cart:t}})},u=()=>{localStorage.removeItem("user"),s("/login")},h=x=>{a(!1),s(x)},v=x=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(x),g=t.reduce((x,N)=>x+N.qty,0),w=t.reduce((x,N)=>x+N.qty*N.price,0);return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-gray-100 to-white",children:[e.jsxs("nav",{className:"flex justify-between items-center px-4 py-3 bg-indigo-600 text-white shadow sticky top-0 z-50",children:[e.jsxs("h1",{className:"text-lg font-bold truncate max-w-xs",children:["Welcome, ",r?.toUpperCase()]}),e.jsxs("div",{className:"flex items-center gap-5 relative",ref:l,children:[e.jsxs("button",{onClick:()=>a(!d),className:"flex items-center gap-1",children:[e.jsx(V,{className:"text-2xl"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Profile"})]}),d&&e.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-white text-black border rounded shadow-lg z-50 animate-slide-in",children:[e.jsx("button",{onClick:()=>h("/profile"),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Account"}),e.jsx("button",{onClick:()=>h("/orders"),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"My Orders"}),e.jsx("button",{onClick:()=>h("/track-order"),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Track Order"}),e.jsx("button",{onClick:u,className:"w-full text-left px-4 py-2 hover:bg-red-100",children:"Logout"})]}),e.jsxs("button",{onClick:()=>f(!m),className:"relative",children:[e.jsx(ge,{className:"text-2xl"}),g>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:g})]})]})]}),e.jsxs("main",{className:"flex-1 p-4",children:[e.jsx(_e,{products:o,onAddToCart:j,formatPrice:v}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>f(!1),className:"fixed inset-0 bg-black bg-opacity-30 z-40 md:hidden"}),e.jsxs("div",{className:"fixed top-14 right-0 w-80 max-h-[85vh] bg-white z-50 p-4 border-l shadow-xl overflow-y-auto rounded-l-xl animate-slide-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-indigo-600",children:"ð Your Cart"}),e.jsx("button",{onClick:()=>f(!1),className:"text-xl text-red-600 md:hidden",children:"Ã"})]}),e.jsx(Ue,{cart:t,updateQty:y,removeItem:S,handleCheckout:c,formatPrice:v,totalPrice:w})]})]})]}),e.jsxs("footer",{className:"bg-indigo-700 text-white text-center p-4 mt-auto",children:["Â© ",new Date().getFullYear()," MyStore. All rights reserved."]}),e.jsx(E,{position:"bottom-right",autoClose:3e3})]})},Je=()=>{const[s,l]=n.useState([]),r=JSON.parse(localStorage.getItem("user")||"{}");return n.useEffect(()=>{(async()=>{try{const o=await O.get(`https://myshop-72k8.onrender.com/orders/${r._id}`);l(o.data.orders||[])}catch(o){console.error("Error fetching orders",o)}})()},[r._id]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-indigo-700",children:"My Orders"}),s.length===0?e.jsx("p",{children:"No orders found."}):e.jsx("div",{className:"space-y-6",children:s.map(i=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",i._id.slice(-6)]}),e.jsx("span",{className:"text-sm text-gray-500",children:ve(new Date(i.createdAt),"dd MMM yyyy")})]}),e.jsx("ul",{className:"mt-2 text-sm text-gray-700",children:i.products.map(o=>e.jsxs("li",{children:[o.name," Ã ",o.qty," â â¹",o.price*o.qty]},o.productId))}),e.jsxs("div",{className:"mt-2 text-right text-indigo-600 font-medium",children:["Total: â¹",i.total]})]},i._id))})]})},Ye=()=>{const[s,l]=n.useState([]),[r,i]=n.useState(!0),[o,p]=n.useState("");return n.useEffect(()=>{(async()=>{try{const b=localStorage.getItem("token"),m=await O.get("https://myshop-72k8.onrender.com/getOrders",{headers:{Authorization:`Bearer ${b}`}});console.log(m),l(Array.isArray(m.data)?m.data:m.data.orders||[])}catch(b){console.error("Order fetch error:",b),p("Failed to fetch orders.")}finally{i(!1)}})()},[]),e.jsxs(_.div,{className:"p-4 md:p-6 max-w-6xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-6 text-indigo-700",children:"My Orders"}),r?e.jsx("p",{className:"text-gray-500 text-center animate-pulse",children:"Fetching your orders..."}):o?e.jsx("p",{className:"text-red-600 text-center",children:o}):s.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"You have no orders yet."}):e.jsx("div",{className:"grid gap-6",children:s.map(t=>{const b=new Date(t.createdAt);return b.setDate(b.getDate()+5),e.jsx(_.div,{className:"rounded-2xl border border-gray-200 bg-white shadow hover:shadow-md transition-all",whileHover:{scale:1.01},children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 p-4 md:p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order ID:"})," ",t._id]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Date:"})," ",new Date(t.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})]}),e.jsxs("div",{className:"text-sm text-green-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Delivery Estimate:"})," ",b.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})]}),e.jsx("div",{className:"divide-y",children:t.items.map((m,f)=>e.jsxs("div",{className:"flex items-center gap-4 py-2",children:[e.jsx("img",{src:m.image||"/placeholder.jpg",alt:m.name,className:"w-14 h-14 rounded-md object-cover border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",m.qty]})]}),e.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:["â¹",(m.qty||1)*(m.price||0)]})]},f))})]}),e.jsxs("div",{className:"flex flex-col justify-between items-end text-right gap-3 w-full md:w-64",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:["â¹",(t.totalAmount||0).toLocaleString("en-IN")]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"})]}),e.jsx("div",{children:e.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium
                                                ${t.status==="Delivered"?"bg-green-100 text-green-700":t.status==="Shipped"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:t.status||"Processing"})}),t.shippingAddress&&e.jsxs("div",{className:"text-xs text-gray-500 text-left md:text-right",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-1",children:"Shipping To:"}),e.jsx("p",{children:t.shippingAddress.name}),e.jsx("p",{children:t.shippingAddress.street}),e.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," - ",t.shippingAddress.zip]})]})]})]})},t._id)})})]})},He=()=>{const[s,l]=n.useState(""),[r,i]=n.useState(null),[o,p]=n.useState(""),[t,b]=n.useState(!1),m=async()=>{if(!s){p("Please enter an Order ID."),i(null);return}b(!0),p(""),i(null);try{const d=localStorage.getItem("token"),a=await O.get(`https://myshop-72k8.onrender.com/getOrderById/${s.trim()}`,{headers:{Authorization:`Bearer ${d}`}});a.data&&a.data.order?i(a.data.order):p("Order not found.")}catch(d){console.error(d),p(d.response?.data?.message||"Failed to fetch order.")}finally{b(!1)}},f=d=>{switch(d?.toLowerCase()){case"shipped":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"pending":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}};return e.jsxs(_.div,{className:"p-6 max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Track Your Order"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Enter Order ID (e.g., 665f3796a2...)",value:s,onChange:d=>l(d.target.value),className:"flex-1 border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring focus:border-blue-400"}),e.jsx("button",{onClick:m,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-60",children:t?"Tracking...":"Track"})]}),o&&e.jsx("p",{className:"text-red-500 mb-3",children:o}),r&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold text-lg",children:["Order #",r._id]}),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${f(r.status)}`,children:r.status||"Processing"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Order Date: ",r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"]}),e.jsx("div",{className:"divide-y",children:r.items?.map((d,a)=>e.jsxs("div",{className:"py-2 flex items-center gap-4",children:[e.jsx("img",{src:d.image||"/placeholder.jpg",alt:d.name,className:"w-16 h-16 object-cover rounded-md border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",d.qty]})]}),e.jsxs("p",{className:"font-semibold",children:["â¹",d.price*d.qty]})]},a))}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold",children:["Total: â¹",r.totalAmount||0]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated Delivery:"," ",r.createdAt?new Date(new Date(r.createdAt).getTime()+7200*60*1e3).toLocaleDateString():"N/A"]})]})]})]})},We=()=>{const s=I(),[l,r]=n.useState({_id:"",name:"",email:"",password:"",contact:"",city:"",pincode:"",dob:"",gender:""}),[i,o]=n.useState({}),[p,t]=n.useState({}),[b,m]=n.useState(!1),[f,d]=n.useState(!1);n.useEffect(()=>{const u=JSON.parse(localStorage.getItem("user"));u&&(r({...u,password:""}),o({...u,password:""}))},[]),n.useEffect(()=>{const u=h=>{f&&(h.preventDefault(),h.returnValue="")};return window.addEventListener("beforeunload",u),()=>window.removeEventListener("beforeunload",u)},[f]);const a=u=>{const{name:h,value:v}=u.target;r(g=>({...g,[h]:v})),d(!0)},j=u=>{u==="email"||u==="contact"||t(h=>({...h,[u]:!0}))},y=u=>{r(h=>({...h,[u]:i[u]})),t(h=>({...h,[u]:!1}))},S=async u=>{u.preventDefault();try{const h=localStorage.getItem("token"),{_id:v,...g}=l;g.password||delete g.password;const{data:w}=await O.put("https://myshop-72k8.onrender.com/update-profile",g,{headers:{Authorization:`Bearer ${h}`}});localStorage.setItem("user",JSON.stringify(w.user)),k.success("Profile updated successfully! Redirecting..."),m(!0),t({}),d(!1),setTimeout(()=>{s("/user/dashboard")},3e3)}catch(h){k.error(h.response?.data?.message||"Failed to update profile")}},c=(u,h,v="text")=>{const g=h==="email"||h==="contact";return e.jsxs("div",{onDoubleClick:()=>j(h),className:`relative group ${g?"cursor-not-allowed":"cursor-pointer"}`,title:g?"This field is not editable":"Double-click to edit",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:u}),p[h]?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:v,name:h,value:l[h]||"",onChange:a,className:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("button",{type:"button",onClick:()=>y(h),className:"text-sm text-red-500 hover:underline",title:"Reset this field to original value",children:"ð"})]}):e.jsx("p",{className:`p-2 bg-gray-100 rounded ${g?"text-gray-500":""}`,children:l[h]||"-"})]})};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white p-6 shadow rounded-lg relative",children:[e.jsx(E,{}),b&&e.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center z-10 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-4 border-indigo-600 border-solid mb-4"}),e.jsx("p",{className:"text-indigo-600 font-semibold",children:"Redirecting to dashboard..."})]}),e.jsx("h2",{className:"text-2xl font-bold text-indigo-600 mb-6",children:"User Profile"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[c("Name","name"),c("Email","email","email"),c("Contact","contact"),c("City","city"),c("Pincode","pincode"),c("Date of Birth","dob","date"),c("Gender","gender"),p.password?e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"password",name:"password",value:l.password,onChange:a,className:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>y("password"),className:"text-sm text-red-500 hover:underline",title:"Reset this field to original value",children:"ð"})]})]}):e.jsxs("div",{onDoubleClick:()=>j("password"),children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Password"}),e.jsx("p",{className:"p-2 bg-gray-100 rounded",children:"â¢â¢â¢â¢â¢â¢â¢â¢"})]}),f&&e.jsx("button",{type:"submit",disabled:b,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition disabled:opacity-50",children:"Save Changes"})]})]})},Ve=()=>{const s=I(),[l,r]=n.useState(3);return n.useEffect(()=>{if(l===0){s("/user/dashboard");return}const i=setTimeout(()=>r(l-1),1e3);return()=>clearTimeout(i)},[l,s]),e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-white",children:e.jsxs("div",{className:"p-6 text-center text-red-600",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"403 - Unauthorized"}),e.jsx("p",{children:"You do not have permission to view this page."}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Redirecting in ",e.jsx("span",{className:"font-semibold",children:l})," ","second",l!==1?"s":"","..."]})]})})},Ge=()=>{const[s,l]=n.useState([]);n.useEffect(()=>{const i=new Date,o=new Date(i.getFullYear(),i.getMonth()-1,1),p=new Date(i.getFullYear(),i.getMonth(),0),b=[{id:"INV001",customer:"John Doe",amount:2500,date:"2025-04-12"},{id:"INV002",customer:"Jane Smith",amount:1800,date:"2025-04-18"},{id:"INV003",customer:"Amit Kumar",amount:3200,date:"2025-04-21"}].filter(m=>{const f=new Date(m.date);return f>=o&&f<=p});l(b)},[]);const r=()=>{if(s.length===0){alert("No invoices found for last month.");return}const i=new we;i.setFontSize(16),i.text("Deepak's Mart",14,20),i.setFontSize(12),i.text("Invoice Report (Last Month)",14,30),i.text("Owner: Deepak Kushwah",14,36),i.setFontSize(10);const o=s.map(t=>[t.id,t.customer,`â¹${t.amount.toLocaleString()}`,t.date]);ke(i,{startY:45,head:[["Invoice ID","Customer","Amount","Date"]],body:o});const p=s.reduce((t,b)=>t+b.amount,0);i.text(`Total Revenue: â¹${p.toLocaleString()}`,14,i.lastAutoTable.finalY+10),i.save("invoices_last_month.pdf")};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow rounded",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Last Month's Invoices"}),s.length===0?e.jsx("p",{className:"text-gray-600",children:"No invoices found for last month."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"mb-4 space-y-2",children:s.map(i=>e.jsxs("li",{className:"flex justify-between border-b pb-2",children:[e.jsx("span",{children:i.customer}),e.jsxs("span",{children:["â¹",i.amount.toLocaleString()]}),e.jsx("span",{children:i.date})]},i.id))}),e.jsx("button",{onClick:r,className:"bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700",children:"Download PDF"})]})]})]})},M=({label:s,name:l,value:r,onChange:i,placeholder:o,type:p="text",hint:t})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:l,className:"block text-sm font-medium mb-1",children:s}),e.jsx("input",{id:l,name:l,type:p,value:r,onChange:i,placeholder:o,className:"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),t&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t})]}),Qe=()=>{const[s,l]=n.useState([]),[r,i]=n.useState(""),[o,p]=n.useState(null),[t,b]=n.useState({name:"",price:"",mrp:"",discount:"",stock:""}),[m,f]=n.useState({}),[d,a]=n.useState(!0),[j,y]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const N=await O.get("https://myshop-72k8.onrender.com/products");l(Array.isArray(N.data.products)?N.data.products:[])}catch(N){console.error("Failed to fetch products",N),F.error("Failed to fetch products"),l([])}finally{a(!1)}})()},[]);const S=async x=>{if(window.confirm("Are you sure you want to delete this product?"))try{await O.delete(`https://myshop-72k8.onrender.com/products/${x}`),l(N=>N.filter(C=>C._id!==x)),F.success("Product deleted successfully!")}catch(N){console.error("Delete failed",N.response||N.message||N),F.error("Failed to delete product.")}},c=x=>{p(x),b({name:String(x.name||""),price:String(x.price||""),mrp:String(x.mrp||""),discount:String(x.discount||""),stock:String(x.stock||"")}),f({})},u=()=>{p(null),b({name:"",price:"",mrp:"",discount:"",stock:""}),f({})},h=x=>{const{name:N,value:C}=x.target;b({...t,[N]:C})},v=()=>{const x={};return t.name.trim()||(x.name="Name is required"),(isNaN(t.price)||t.price<=0)&&(x.price="Price must be positive"),(isNaN(t.mrp)||t.mrp<=0)&&(x.mrp="MRP must be positive"),(t.discount===""||t.discount<0||t.discount>100)&&(x.discount="0-100 only"),(isNaN(t.stock)||t.stock<0)&&(x.stock="Stock cannot be negative"),f(x),Object.keys(x).length===0},g=async()=>{if(v()){y(!0);try{const x={...t,price:Number(t.price),mrp:Number(t.mrp),discount:Number(t.discount),stock:Number(t.stock)};await O.put(`https://myshop-72k8.onrender.com/products/${o._id}`,x),l(N=>N.map(C=>C._id===o._id?{...C,...x}:C)),F.success("Product updated successfully!"),u()}catch(x){console.error("Update failed",x.response||x.message||x),F.error("Failed to update product.")}finally{y(!1)}}},w=s.filter(x=>x.name?.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[e.jsx(pe,{position:"top-right",reverseOrder:!1}),e.jsx("h1",{className:"text-4xl font-extrabold text-indigo-700 text-center mb-12",children:"Admin Panel - Product Management"}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full max-w-lg border border-indigo-300 px-5 py-3 rounded-xl shadow-sm placeholder-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition",value:r,onChange:x=>i(x.target.value)})}),d?e.jsx("p",{className:"text-center mt-16 text-gray-500 text-lg",children:"Loading products..."}):w.length===0?e.jsx("p",{className:"text-center text-gray-500 text-lg",children:"No products found."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:w.map(x=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-md hover:shadow-2xl transition-shadow duration-300 p-6 flex flex-col",children:[e.jsx("img",{src:x.image||"/placeholder.jpg",alt:x.name,className:"h-48 w-full object-cover rounded-2xl mb-5 shadow"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 truncate mb-2",children:x.name}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Listed: ",x.listedDate?new Date(x.listedDate).toLocaleDateString():"N/A"]}),e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("p",{className:"text-base font-semibold text-green-700",children:["â¹",x.price]}),e.jsxs("p",{className:"text-sm text-gray-400 line-through",children:["â¹",x.mrp]})]}),e.jsxs("p",{className:"text-sm text-indigo-600 font-medium mb-1",children:["Discount: ",x.discount,"%"]}),e.jsx("p",{className:`text-sm font-medium ${x.stock>0?"text-green-600":"text-red-500"}`,children:x.stock>0?`${x.stock} in stock`:"Out of stock"}),e.jsxs("div",{className:"flex justify-between mt-auto pt-6 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>c(x),className:"text-indigo-600 font-semibold hover:text-indigo-800 transition",children:"Edit"}),e.jsx("button",{onClick:()=>S(x._id),className:"text-red-600 font-semibold hover:text-red-800 transition",children:"Delete"})]})]},x._id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 px-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl w-full max-w-md p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-700 mb-6 text-center",children:"Edit Product"}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(M,{label:"Product Name",name:"name",value:t.name,onChange:h,placeholder:"Enter product name"}),m.name&&e.jsx("p",{className:"text-xs text-red-600",children:m.name}),e.jsx(M,{label:"Price (â¹)",name:"price",type:"number",value:t.price,onChange:h,placeholder:"Enter price"}),m.price&&e.jsx("p",{className:"text-xs text-red-600",children:m.price}),e.jsx(M,{label:"MRP (â¹)",name:"mrp",type:"number",value:t.mrp,onChange:h,placeholder:"Enter MRP"}),m.mrp&&e.jsx("p",{className:"text-xs text-red-600",children:m.mrp}),e.jsx(M,{label:"Discount (%)",name:"discount",type:"number",value:t.discount,onChange:h,placeholder:"0 - 100"}),m.discount&&e.jsx("p",{className:"text-xs text-red-600",children:m.discount}),e.jsx(M,{label:"Stock",name:"stock",type:"number",value:t.stock,onChange:h,placeholder:"Available stock quantity"}),m.stock&&e.jsx("p",{className:"text-xs text-red-600",children:m.stock})]}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("button",{onClick:u,className:"bg-gray-200 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:j,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition disabled:opacity-60",children:j?"Saving...":"Save Changes"})]})]})})]})},Ke=()=>{const[s,l]=n.useState([]),[r,i]=n.useState(!0),[o,p]=n.useState("All"),[t,b]=n.useState(""),[m,f]=n.useState(null),[d,a]=n.useState(1),j=6,y=["Pending","Processing","Shipped","Delivered","Cancelled"],S={Delivered:"bg-green-100 text-green-700 border border-green-300",Shipped:"bg-blue-100 text-blue-700 border border-blue-300",Processing:"bg-yellow-100 text-yellow-700 border border-yellow-300",Cancelled:"bg-red-100 text-red-700 border border-red-300",Pending:"bg-gray-100 text-gray-700 border border-gray-300"};n.useEffect(()=>{(async()=>{try{const w=localStorage.getItem("token"),x=await O.get("https://myshop-72k8.onrender.com/getOrderAdmin",{headers:{Authorization:`Bearer ${w}`}});l(x.data.orders||[])}catch(w){console.error(w),k.error("Failed to fetch orders")}finally{i(!1)}})()},[]);const c=async(g,w)=>{const x=localStorage.getItem("token"),N=s.find(C=>C._id===g);if(!N)return k.error("Order not found.");if(["Delivered","Cancelled"].includes(N.status))return k.warning(`Cannot update a ${N.status.toLowerCase()} order.`);if(N.status!==w){f(g);try{const C=await O.put(`https://myshop-72k8.onrender.com/orders/${g}/status`,{status:w},{headers:{Authorization:`Bearer ${x}`}});l(L=>L.map(D=>D._id===g?{...D,status:C.data.order.status}:D)),k.success("Order status updated")}catch(C){console.error(C),k.error("Failed to update status")}finally{f(null)}}},u=s.filter(g=>{const w=o==="All"||g.status===o,x=g._id?.toLowerCase().includes(t.toLowerCase())||g.userId?.name?.toLowerCase().includes(t.toLowerCase());return w&&x}),h=Math.ceil(u.length/j),v=u.slice((d-1)*j,d*j);return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 md:p-10",children:[e.jsx(E,{}),e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:"Admin Orders"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs("select",{value:o,onChange:g=>{p(g.target.value),a(1)},className:"border rounded px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"All",children:"All Statuses"}),y.map(g=>e.jsx("option",{children:g},g))]}),e.jsx("input",{type:"text",placeholder:"Search by Order ID or Name",value:t,onChange:g=>{b(g.target.value),a(1)},className:"border rounded px-4 py-2 w-full sm:w-80 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-dashed rounded-full animate-spin"})}):u.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No matching orders found."}):e.jsxs("div",{className:"space-y-6",children:[v.map(g=>e.jsxs("div",{className:"border rounded-xl p-5 bg-gray-50 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Order Date:"})," ",new Date(g.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.jsx("select",{className:`text-xs font-medium mt-2 md:mt-0 px-3 py-1 rounded-full cursor-pointer transition-all duration-200 ${S[g.status]||"bg-gray-200 text-gray-800"}`,value:g.status,disabled:m===g._id||["Delivered","Cancelled"].includes(g.status),onChange:w=>c(g._id,w.target.value),children:y.map(w=>e.jsx("option",{value:w,children:w},w))})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-4",children:g.items.map((w,x)=>e.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded shadow",children:[e.jsx("img",{src:w.image,alt:w.name,className:"w-14 h-14 object-cover rounded border"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",w.qty," | â¹",w.price]})]})]},x))}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",g.userId?.name||"N/A"," (",g.userId?.email||"N/A",")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",g.shipping?.city||"N/A"," |"," ",e.jsx("strong",{children:"Zip:"})," ",g.shipping?.zip||"N/A"]})]}),e.jsxs("div",{className:"text-indigo-600 font-bold text-lg mt-2 sm:mt-0",children:["â¹",g.totalAmount?.toFixed(2)]})]})]},g._id)),e.jsxs("div",{className:"flex justify-center space-x-2 pt-6",children:[e.jsx("button",{onClick:()=>a(g=>Math.max(g-1,1)),disabled:d===1,className:"px-3 py-1 border rounded text-sm disabled:opacity-50",children:"Prev"}),Array.from({length:h},(g,w)=>e.jsx("button",{onClick:()=>a(w+1),className:`px-3 py-1 border rounded text-sm ${d===w+1?"bg-indigo-600 text-white border-indigo-600":"text-indigo-600"}`,children:w+1},w)),e.jsx("button",{onClick:()=>a(g=>Math.min(g+1,h)),disabled:d===h,className:"px-3 py-1 border rounded text-sm disabled:opacity-50",children:"Next"})]})]})]})]})},Ze=()=>e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Settings"}),e.jsx("p",{children:"Configure your admin panel and preferences here."})]}),Xe=()=>{const[s,l]=n.useState({name:"",costPrice:"",mrp:"",discount:"",stock:"",image:"",category:"",description:""}),[r,i]=n.useState({}),[o,p]=n.useState(null),[t,b]=n.useState(!1),[m,f]=n.useState(!0),d=["Electronics","Clothing","Home & Kitchen","Books","Sports","Toys"],a=()=>{const c={};return s.name.trim()||(c.name="Product name is required"),(!s.costPrice||s.costPrice<=0)&&(c.costPrice="Enter valid cost price"),(!s.mrp||s.mrp<=0)&&(c.mrp="Enter valid MRP"),(s.discount<0||s.discount>100)&&(c.discount="Discount must be 0-100"),s.stock<0&&(c.stock="Enter valid stock"),s.image.trim()||(c.image="Image URL is required"),s.category||(c.category="Please select a category"),s.description.trim()||(c.description="Description is required"),c},j=c=>{const{name:u,value:h}=c.target,v=["costPrice","mrp","discount","stock"];l({...s,[u]:v.includes(u)?Number(h):h})},y=()=>{const{mrp:c,discount:u}=s;return c&&u>=0?(c-c*u/100).toFixed(2):""},S=async c=>{c.preventDefault();const u=a();if(i(u),Object.keys(u).length===0){b(!0);const h=y();try{const v=await O.post("https://myshop-72k8.onrender.com/products/add",{...s,price:h});v.status===201?(k.success("â Product added successfully!"),p(v.data.product),l({name:"",costPrice:"",mrp:"",discount:"",stock:"",image:"",category:"",description:""}),setTimeout(()=>{p(null),f(!1)},3e3)):k.error("Server error. Please try again.")}catch(v){console.error(v),k.error("Failed to add product")}finally{b(!1)}}};return m?e.jsxs("div",{className:"relative max-w-4xl mx-auto p-6 bg-white shadow-2xl rounded-xl mt-10 mb-10 transition-all animate-fade-in",children:[o&&e.jsx("button",{onClick:()=>f(!1),className:"absolute top-3 right-3 text-gray-500 hover:text-red-500 transition text-2xl font-bold","aria-label":"Close",children:"Ã"}),e.jsx("h2",{className:"text-4xl font-bold text-center text-indigo-700 mb-8",children:"ð Add New Product"}),e.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Product Name"}),e.jsx("input",{name:"name",type:"text",value:s.name,onChange:j,placeholder:"E.g., Bluetooth Speaker",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.name?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Cost Price (â¹)"}),e.jsx("input",{name:"costPrice",type:"number",value:s.costPrice,onChange:j,placeholder:"Your purchase price (e.g., 100)",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.costPrice?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.costPrice&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.costPrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"MRP (â¹)"}),e.jsx("input",{name:"mrp",type:"number",value:s.mrp,onChange:j,placeholder:"E.g., 400",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.mrp?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.mrp&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.mrp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Discount (%)"}),e.jsx("input",{name:"discount",type:"number",value:s.discount,onChange:j,placeholder:"E.g., 20",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.discount?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.discount&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.discount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Stock"}),e.jsx("input",{name:"stock",type:"number",value:s.stock,onChange:j,placeholder:"E.g., 50",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.stock?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.stock&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.stock})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Image URL"}),e.jsx("input",{name:"image",type:"text",value:s.image,onChange:j,placeholder:"E.g., https://example.com/image.jpg",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.image?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.image&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Category"}),e.jsxs("select",{name:"category",value:s.category,onChange:j,className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.category?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`,children:[e.jsx("option",{value:"",children:"-- Select Category --"}),d.map(c=>e.jsx("option",{value:c,children:c},c))]}),r.category&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.category})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",rows:"4",value:s.description,onChange:j,placeholder:"Product details, materials, features etc.",className:`w-full px-4 py-2 mt-1 rounded-lg border ${r.description?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 transition`}),r.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.description})]}),s.image&&!r.image&&e.jsx("div",{className:"md:col-span-2 flex justify-center mt-4",children:e.jsx("img",{src:s.image,alt:"Preview",className:"h-48 w-auto object-cover rounded-lg shadow-md"})}),y()&&e.jsxs("div",{className:"md:col-span-2 text-center mt-2 text-lg font-medium text-green-700",children:["Final Selling Price: â¹",y()]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition disabled:opacity-60",children:t?"Saving...":"Save Product"})})]}),o&&e.jsxs("div",{className:"mt-10 p-6 bg-gray-50 border rounded-lg shadow-inner animate-fade-in-down",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:o.name}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[e.jsx("img",{src:o.image,alt:o.name,className:"w-40 h-40 object-cover rounded shadow"}),e.jsxs("div",{className:"text-gray-700 space-y-1 text-sm md:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",o.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",o.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cost Price:"})," â¹",o.costPrice]}),e.jsxs("p",{children:[e.jsx("strong",{children:"MRP:"})," â¹",o.mrp]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Discount:"})," ",o.discount,"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stock:"})," ",o.stock]}),e.jsxs("p",{className:"text-indigo-600 font-semibold",children:["Final Price: â¹",o.price]})]})]})]})]}):null},es=({setCart:s})=>{const{state:l}=U(),r=I(),[i,o]=n.useState(()=>{const c=localStorage.getItem("cart");return l?.cart||(c?JSON.parse(c):[])}),[p,t]=n.useState(()=>{if(l?.totalPrice)return l.totalPrice;const c=localStorage.getItem("cart");return c?JSON.parse(c).reduce((h,v)=>h+v.qty*v.price,0):0}),[b,m]=n.useState(!1),[f,d]=n.useState(""),[a,j]=n.useState({name:"",address:"",city:"",zip:""}),y=c=>{j({...a,[c.target.name]:c.target.value})},S=async()=>{if(i.length===0)return d("Cart is empty");if(!a.name||!a.address||!a.city||!a.zip)return d("Please fill all shipping fields");m(!0),d("");try{const c=localStorage.getItem("token");if(!c){d("You must be logged in to place an order."),m(!1);return}await Promise.all(i.map(h=>{const v=h._id||h.id;if(!v){console.warn("Missing productId for stock update",h);return}return O.put(`https://myshop-72k8.onrender.com/products/${v}/update-stock`,{qtyChange:h.qty},{headers:{Authorization:`Bearer ${c}`}})}));const u=await O.post("https://myshop-72k8.onrender.com/orders/place",{items:i,shipping:a,totalAmount:p},{headers:{Authorization:`Bearer ${c}`}});console.log(u),localStorage.removeItem("cart"),o([]),typeof s=="function"&&s([]),r("/order-success")}catch(c){console.error("Checkout error:",c.response?.data||c.message),d(c.response?.data?.message||"Checkout failed.")}finally{m(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8 animate-fade-in",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:"Checkout"}),f&&e.jsx("p",{className:"text-red-600 text-center mb-4",children:f}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8 transition hover:shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Shipping Information"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Full Name",className:"input-style",value:a.name,onChange:y}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",className:"input-style",value:a.address,onChange:y}),e.jsx("input",{type:"text",name:"city",placeholder:"City",className:"input-style",value:a.city,onChange:y}),e.jsx("input",{type:"text",name:"zip",placeholder:"ZIP Code",className:"input-style",value:a.zip,onChange:y})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6 transition hover:shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Order Summary"}),e.jsx("ul",{className:"divide-y divide-gray-200 mb-4",children:i.map(c=>e.jsxs("li",{className:"py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",c.qty," Ã â¹",c.price]})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["â¹",c.qty*c.price]})]},c._id||c.id))}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-800 mb-1",children:["Total: â¹",p.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 italic animate-pulse",children:"Delivery estimate: 5-7 business days"})]})]}),e.jsx("button",{onClick:S,disabled:b,className:`w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg text-lg font-medium transition-all duration-300 ${b?"opacity-50 cursor-not-allowed":""}`,children:b?"Placing Order...":"Place Order"})]})},ss=()=>{const s=I(),[l,r]=n.useState(3);return n.useEffect(()=>{if(l===0){s("/user/dashboard");return}const i=setTimeout(()=>r(l-1),1e3);return()=>clearTimeout(i)},[l,s]),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-700 mb-4",children:"Order Placed Successfully!"}),e.jsx("p",{children:"Thank you for shopping with us."}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Redirecting in ",e.jsx("span",{className:"font-semibold",children:l})," ","second",l!==1?"s":"","..."]})]})},T=({children:s,allowedRoles:l})=>{const{user:r,loading:i}=n.useContext(B);return i?e.jsx("div",{className:"flex justify-center items-center min-h-screen text-gray-500",children:"Loading..."}):r?l&&!l.includes(r.role)?e.jsx(R,{to:"/unauthorized",replace:!0}):s:e.jsx(R,{to:"/login",replace:!0})},ts=()=>{const[s,l]=n.useState([]),[r,i]=n.useState(""),[o,p]=n.useState(1),[t,b]=n.useState(1),[m,f]=n.useState(!1),[d,a]=n.useState(""),j=10,y=async()=>{const u=localStorage.getItem("token");if(!u){a("Unauthorized. Please login.");return}try{f(!0);const h=await O.get("https://myshop-72k8.onrender.com/admin/users",{params:{search:r,page:o,limit:j},headers:{Authorization:`Bearer ${u}`}});console.log(h.data),console.log(s),h.status===200&&(l(h.data.users||[]),b(h.data.totalPages||1),a(""))}catch(h){console.error(h),a(h?.response?.data?.message||"Failed to fetch users")}finally{f(!1)}},S=Se.debounce(y,400);n.useEffect(()=>(S(),()=>S.cancel()),[r,o]);const c=async u=>{if(window.confirm("Are you sure you want to delete this user?"))try{const h=localStorage.getItem("token");await O.delete("https://myshop-72k8.onrender.com/delete-user",{data:{userId:u},headers:{Authorization:`Bearer ${h}`}}),F.success("User deleted successfully"),y()}catch(h){console.error(h),F.error(h?.response?.data?.message||"Failed to delete user")}};return e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-indigo-600",children:"Manage Users"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:u=>{i(u.target.value),p(1)},placeholder:"Search users by name or email...",className:"w-full p-2 pr-10 border rounded dark:bg-gray-800 dark:text-white"}),r&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-2 top-2 text-gray-500 hover:text-red-500",children:"Ã"})]}),m?e.jsx("p",{className:"text-center text-indigo-600 animate-pulse",children:"Loading users..."}):d?e.jsx("p",{className:"text-center text-red-600",children:d}):s.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No users found."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full border border-gray-300 dark:border-gray-600 text-left",children:[e.jsx("thead",{className:"bg-indigo-100 dark:bg-indigo-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"#"}),e.jsx("th",{className:"p-3",children:"Name"}),e.jsx("th",{className:"p-3",children:"Email"}),e.jsx("th",{className:"p-3",children:"Role"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{children:s.map((u,h)=>e.jsxs("tr",{className:"border-t dark:border-gray-700",children:[e.jsx("td",{className:"p-3",children:(o-1)*j+h+1}),e.jsx("td",{className:"p-3",children:u.name}),e.jsx("td",{className:"p-3",children:u.email}),e.jsx("td",{className:"p-3 capitalize",children:u.role}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{className:"text-blue-600 hover:underline mr-2",onClick:()=>console.log("Edit user",u._id),children:"Edit"}),e.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>c(u._id),children:"Delete"})]})]},u._id))})]}),e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-4",children:[e.jsx("button",{disabled:o===1,onClick:()=>p(u=>Math.max(u-1,1)),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600 disabled:opacity-50",children:"Prev"}),e.jsxs("span",{className:"text-indigo-700 dark:text-indigo-300",children:["Page ",o," of ",t]}),e.jsx("button",{disabled:o===t,onClick:()=>p(u=>u+1),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600 disabled:opacity-50",children:"Next"})]})]})]})},as=()=>e.jsx(fe,{children:e.jsxs(be,{children:[e.jsxs(A,{element:e.jsx(Pe,{}),children:[e.jsx(A,{path:"/",element:e.jsx(Ae,{})}),e.jsx(A,{path:"/about",element:e.jsx(Ie,{})}),e.jsx(A,{path:"/login",element:e.jsx(Me,{})}),e.jsx(A,{path:"/forget-password",element:e.jsx($e,{})}),e.jsx(A,{path:"/signup",element:e.jsx(ze,{})}),e.jsx(A,{path:"/checkout",element:e.jsx(es,{})}),e.jsx(A,{path:"/order-success",element:e.jsx(ss,{})}),e.jsx(A,{path:"/user/dashboard",element:e.jsx(T,{allowedRoles:["user","admin"],children:e.jsx(Be,{})})}),e.jsx(A,{path:"/profile",element:e.jsx(T,{allowedRoles:["user","admin"],children:e.jsx(We,{})})}),e.jsx(A,{path:"/user/orders",element:e.jsx(T,{allowedRoles:["user","admin"],children:e.jsx(Je,{})})}),e.jsx(A,{path:"/orders",element:e.jsx(T,{allowedRoles:["user","admin"],children:e.jsx(Ye,{})})}),e.jsx(A,{path:"/track-order",element:e.jsx(T,{allowedRoles:["user","admin"],children:e.jsx(He,{})})})]}),e.jsxs(A,{path:"/admin",element:e.jsx(T,{allowedRoles:["admin"],children:e.jsx(qe,{})}),children:[e.jsx(A,{index:!0,element:e.jsx(R,{to:"dashboard",replace:!0})}),e.jsx(A,{path:"dashboard",element:e.jsx(Ge,{})}),e.jsx(A,{path:"customers",element:e.jsx(Re,{})}),e.jsx(A,{path:"products",element:e.jsx(Qe,{})}),e.jsx(A,{path:"orders",element:e.jsx(Ke,{})}),e.jsx(A,{path:"settings",element:e.jsx(Ze,{})}),e.jsx(A,{path:"product/add",element:e.jsx(Xe,{})}),e.jsx(A,{path:"users",element:e.jsx(ts,{})})]}),e.jsx(A,{path:"/unauthorized",element:e.jsx(Ve,{})}),e.jsx(A,{path:"*",element:e.jsx(R,{to:"/",replace:!0})})]})}),W=document.getElementById("root");W?je.createRoot(W).render(e.jsx(ye.StrictMode,{children:e.jsxs(Te,{children:[e.jsx(E,{position:"top-right",autoClose:2e3}),e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(as,{})})]})})):console.error("â No root element found in HTML!");
